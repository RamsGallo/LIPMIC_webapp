<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LIPMIC | {% block title %}{% endblock title %}</title>

  <!-- Bootstrap & Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Custom Styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/roadmap.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/about.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/idea.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/navbar.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/custom-navbar.css') }}">
</head>

<body>
  <section>
    <header>
      <nav id="navbar" class="navbar navbar-expand-lg navbar-light fixed-top">
        <div class="container-fluid">
          <a class="navbar-brand" href="/">
            <img src="{{ url_for('static', filename='img/logo-3.png') }}" alt="Lipmic Logo" height="30" />
            <span class="lipmic-color">LIPMIC</span>
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item">
                <a class="nav-link fw-bold nav-project active text-color" aria-current="page"
                  href="{{ url_for('pages.about_page') }}"><span class="lipmic-color">About Us</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link fw-bold nav-project active text-color" aria-current="page"
                  href="{{ url_for('pages.design_page') }}"><span class="lipmic-color">Design Roadmap</span></a>
            </li>
            <li class="nav-item">
                <a class="btn btn-primary" href="{{ url_for('pages.console_page') }}" role="button">Go to Console</a>
            </li>
            </ul>
          </div>
        </div>
      </nav>
      {% block header %}{% endblock header %}
    </header>

    <main>
      {% block content %}<p>No content displayed.</p>{% endblock content %}
    </main>
  </section>

  <footer style="background-color: #eff5f7;">
    <div class="container py-4 text-center">
      <p class="mb-0" style="color: #364550;">Â© 2025 Project LIPMIC. All rights reserved.</p>
    </div>
  </footer>

  <script>
    window.addEventListener('scroll', function () {
      const navbar = document.getElementById('navbar');
      if (window.scrollY > 10) {
        navbar.classList.add('transparent');
      } else {
        navbar.classList.remove('transparent');
      }
    });
  </script>

  <!-- Page Load Spinner -->
  <div id="page-spinner"
    class="position-fixed top-0 start-0 w-100 h-100 d-none bg-white d-flex justify-content-center align-items-center"
    style="z-index: 2000;">
    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const spinner = document.getElementById('page-spinner');

      document.querySelectorAll('form').forEach(form => {
        form.addEventListener('submit', () => {
          spinner.classList.remove('d-none');
        });
      });

      document.querySelectorAll('a[href]:not([target="_blank"])').forEach(link => {
        link.addEventListener('click', e => {
          const href = link.getAttribute('href');
          if (href && !href.startsWith('#') && !link.classList.contains('no-spinner')) {
            spinner.classList.remove('d-none');
          }
        });
      });
    });
  </script>
</body>

</html>
