{% extends 'base-console.html' %}
{% block title %}Patient Dashboard{% endblock %}

{% block content %}
<h3 class="mb-3">{{ patient.name }}'s Assessment History</h3>
  {% for result in results %}
    <h4>{{ result.assessment_type | capitalize }} Test</h4>
    <ul class="list-group mb-4">
      <li class="list-group-item">
        <strong>Date:</strong> {{ result.date_taken.strftime('%Y-%m-%d %H:%M') }}<br>
        <strong>Score:</strong> {{ result.score }} / {{ result.answers | length }}<br>
        <strong>Duration:</strong> 
          {% if result.duration %}
            {{ (result.duration // 60) }}m {{ (result.duration % 60) }}s
          {% else %}
            N/A
          {% endif %}
      </li>
    </ul>
  {% else %}
    <p>No results found.</p>
  {% endfor %}
{% endblock %}
